<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Financial Assistant - ผู้ช่วยการลงทุน AI</title>
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Sarabun & Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Sarabun:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Sarabun', 'Inter', sans-serif;
            background-color: #F8F9FC; /* Light gray background */
        }
        .pulse-indicator { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .content-fade-in { animation: fadeIn 0.8s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
        .main-card { background: linear-gradient(135deg, #0d9488, #0f766e); }
        .nav-link-active { color: #0d9488; font-weight: 600; }
        /* Chat bubble styles */
        .chat-bubble-ai { background-color: #ffffff; border: 1px solid #e2e8f0; }
        .chat-bubble-user { background-color: #ccefe8; }
        .thinking-bubble span { animation: bounce 1.4s infinite ease-in-out both; }
        .thinking-bubble span:nth-child(1) { animation-delay: -0.32s; }
        .thinking-bubble span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

        /* --- NEW: AI Loading Animation Styles --- */
        .ai-loader-container svg {
            width: 120px;
            height: 120px;
        }
        .ai-loader-outer-ring {
            stroke: #d1fae5; /* teal-100 */
        }
        .ai-loader-inner-ring {
            stroke: #6ee7b7; /* teal-300 */
            animation: rotate 4s linear infinite;
            transform-origin: center;
        }
        .ai-loader-brain-pulse {
            fill: #a7f3d0; /* teal-200 */
            animation: brain-pulse 2s ease-in-out infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes brain-pulse {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.05); opacity: 1; }
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Header Section -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-20 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Logo -->
            <div class="flex items-center space-x-3">
                <div class="bg-teal-500 p-2 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-candlestick-chart"><path d="M3 3v18h18"/><path d="M7 12v5"/><path d="M7 7v2"/><path d="M12 11v5"/><path d="M12 5v3"/><path d="M17 13v5"/><path d="M17 9v1"/></svg></div>
                <span class="text-xl font-bold text-slate-800">FinAI</span>
            </div>

            <!-- Desktop Menu -->
            <div class="hidden md:flex items-center space-x-8">
                <a href="#" id="nav-briefing" class="nav-link text-slate-600 hover:text-teal-600 font-medium transition-colors nav-link-active">Daily Briefing</a>
                <a href="#" id="nav-qa" class="nav-link text-slate-600 hover:text-teal-600 font-medium transition-colors">AI ช่วยตอบ</a>
                <a href="#" class="bg-teal-600 text-white px-5 py-2 rounded-full hover:bg-teal-700 font-bold transition-all transform hover:scale-105">พอร์ตของฉัน</a>
            </div>

            <!-- Mobile Menu Button -->
            <div class="md:hidden">
                <button id="mobile-menu-btn" class="text-slate-600 hover:text-teal-600 focus:outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
                </button>
            </div>
        </nav>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white pb-4">
            <a href="#" class="block py-2 px-6 text-slate-600 hover:bg-teal-50" id="mobile-nav-briefing">Daily Briefing</a>
            <a href="#" class="block py-2 px-6 text-slate-600 hover:bg-teal-50" id="mobile-nav-qa">AI ช่วยตอบ</a>
            <a href="#" class="block py-2 px-6 text-slate-600 hover:bg-teal-50">พอร์ตของฉัน</a>
        </div>
    </header>

    <!-- Main Content: Container for Pages -->
    <main class="container mx-auto px-6 py-8">
        
        <!-- Page 1: Daily Briefing -->
        <div id="page-briefing">
            <!-- NEW: Updated Loading State -->
            <div id="briefing-loadingState" class="text-center text-slate-500 py-20 flex flex-col items-center justify-center">
                 <div class="ai-loader-container">
                    <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                        <circle class="ai-loader-outer-ring" cx="50" cy="50" r="45" stroke-width="5" fill="none" />
                        <circle class="ai-loader-inner-ring" cx="50" cy="50" r="35" stroke-width="3" fill="none" stroke-dasharray="150 100" />
                        <path class="ai-loader-brain-pulse" d="M50 30 C 40 20, 30 35, 30 45 S 35 65, 50 70 S 65 65, 70 45 S 60 20, 50 30 Z" />
                    </svg>
                </div>
                <p class="mt-6 text-lg font-medium text-slate-600">AI กำลังเตรียมบทสรุปให้คุณ...</p>
            </div>
            <div id="briefing-contentArea" class="hidden content-fade-in">
                <!-- ... Briefing content from before ... -->
                 <div class="main-card text-white rounded-3xl shadow-2xl shadow-teal-900/20 p-8 mb-10">
                    <div class="flex justify-between items-start">
                        <div>
                            <h1 class="text-3xl md:text-4xl font-bold">Daily Briefing</h1>
                            <p id="briefingDate" class="opacity-80 mt-1">ข้อมูลสรุปตลาดประจำวันที่...</p>
                        </div>
                        <div id="aiStatus" class="flex items-center space-x-2 text-white opacity-0 transition-opacity duration-300">
                            <div class="pulse-indicator w-2.5 h-2.5 bg-white rounded-full"></div>
                            <span class="text-sm">กำลังพูด...</span>
                        </div>
                    </div>
                    <p id="mainSummary" class="mt-6 text-lg leading-relaxed opacity-90"></p>
                    <button id="playBtn" class="w-full mt-8 flex items-center justify-center space-x-3 bg-white/20 backdrop-blur-sm text-white font-bold py-3.5 px-4 rounded-xl hover:bg-white/30 focus:outline-none focus:ring-2 focus:ring-white/50 transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        <svg id="playIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm-2 14.5v-9l6 4.5z"/></svg>
                        <svg id="stopIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none" class="hidden"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm-1 5h2a3 3 0 0 1 3 3v2a3 3 0 0 1-3 3h-2a3 3 0 0 1-3-3v-2a3 3 0 0 1 3-3z"/></svg>
                        <span id="playBtnText">รอข้อมูล...</span>
                    </button>
                </div>
                <h2 class="text-2xl font-bold text-slate-800 mb-5">ประเด็นสำคัญวันนี้</h2>
                <div id="highlightsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </div>
        </div>

        <!-- Page 2: AI Q&A -->
        <div id="page-qa" class="hidden content-fade-in">
            <!-- ... AI Q&A content from before ... -->
             <h1 class="text-3xl md:text-4xl font-bold text-slate-900 mb-2">AI ช่วยตอบ</h1>
            <p class="text-slate-500 mb-8">ถามคำถามเกี่ยวกับการเงิน การลงทุน หรือหุ้นที่คุณสนใจได้เลย</p>
            <div class="bg-white rounded-2xl shadow-lg shadow-slate-200/60">
                <div id="chat-container" class="p-6 h-96 overflow-y-auto flex flex-col space-y-4">
                    <div class="flex justify-start">
                        <div class="chat-bubble-ai p-4 rounded-lg max-w-lg">
                            สวัสดีครับ มีอะไรให้ผมช่วยเกี่ยวกับการลงทุนวันนี้?
                        </div>
                    </div>
                </div>
                <div class="p-4 border-t border-slate-200 bg-slate-50 rounded-b-2xl">
                    <form id="qa-form" class="flex items-center space-x-4">
                        <input type="text" id="qa-input" placeholder="พิมพ์คำถามของคุณที่นี่..." class="w-full bg-white border border-slate-300 rounded-lg py-3 px-4 focus:outline-none focus:ring-2 focus:ring-teal-500 transition disabled:bg-slate-100">
                        <button type="submit" id="qa-submit-btn" class="bg-teal-600 text-white rounded-lg p-3 hover:bg-teal-700 transition transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 disabled:bg-slate-400 disabled:cursor-not-allowed">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send-horizontal"><path d="m3 3 3 9-3 9 19-9Z"/><path d="M6 12h16"/></svg>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- Universal Elements & State ---
const _0x5dd4a5=_0x4f5d;(function(_0x3fc15d,_0x385744){const _0x5e2132=_0x4f5d,_0x1e6562=_0x3fc15d();while(!![]){try{const _0x1aa00a=parseInt(_0x5e2132(0x174))/0x1*(-parseInt(_0x5e2132(0x142))/0x2)+-parseInt(_0x5e2132(0x1a3))/0x3*(parseInt(_0x5e2132(0x178))/0x4)+-parseInt(_0x5e2132(0x148))/0x5*(parseInt(_0x5e2132(0x1b4))/0x6)+parseInt(_0x5e2132(0x191))/0x7*(-parseInt(_0x5e2132(0x1bc))/0x8)+-parseInt(_0x5e2132(0x179))/0x9*(parseInt(_0x5e2132(0x17b))/0xa)+-parseInt(_0x5e2132(0x19d))/0xb*(parseInt(_0x5e2132(0x153))/0xc)+-parseInt(_0x5e2132(0x168))/0xd*(-parseInt(_0x5e2132(0x16f))/0xe);if(_0x1aa00a===_0x385744)break;else _0x1e6562['push'](_0x1e6562['shift']());}catch(_0x3e2090){_0x1e6562['push'](_0x1e6562['shift']());}}}(_0x5471,0x8ff23));let isSpeaking=![],utterance;function _0x4f5d(_0x45accc,_0x2f2107){const _0x54711e=_0x5471();return _0x4f5d=function(_0x4f5d6d,_0xad9b6b){_0x4f5d6d=_0x4f5d6d-0x13d;let _0xb90035=_0x54711e[_0x4f5d6d];return _0xb90035;},_0x4f5d(_0x45accc,_0x2f2107);}const speech=window[_0x5dd4a5(0x1a0)],GEMINI_API_KEY=_0x5dd4a5(0x171),pages={'briefing':document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x1b3)),'qa':document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x1a2))},navLinks={'briefing':document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x190)),'qa':document['getElementById']('nav-qa')};function navigate(_0x40509e){const _0x5f599f=_0x5dd4a5;Object[_0x5f599f(0x187)](pages)[_0x5f599f(0x170)](_0x42c005=>_0x42c005['classList'][_0x5f599f(0x1ab)](_0x5f599f(0x1af))),Object[_0x5f599f(0x187)](navLinks)[_0x5f599f(0x170)](_0x5d3fa7=>_0x5d3fa7[_0x5f599f(0x150)][_0x5f599f(0x177)](_0x5f599f(0x1a8))),pages[_0x40509e][_0x5f599f(0x150)][_0x5f599f(0x177)](_0x5f599f(0x1af)),navLinks[_0x40509e]['classList'][_0x5f599f(0x1ab)](_0x5f599f(0x1a8)),stopSpeaking();}navLinks[_0x5dd4a5(0x18e)][_0x5dd4a5(0x1b8)](_0x5dd4a5(0x145),_0x2cdd27=>{const _0x55c8f4=_0x5dd4a5;_0x2cdd27[_0x55c8f4(0x157)](),navigate('briefing');}),navLinks['qa'][_0x5dd4a5(0x1b8)](_0x5dd4a5(0x145),_0x225591=>{_0x225591['preventDefault'](),navigate('qa');});const mobileMenuBtn=document['getElementById']('mobile-menu-btn'),mobileMenu=document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x1c0)),mobileNavBriefing=document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x1a5)),mobileNavQa=document['getElementById']('mobile-nav-qa');mobileMenuBtn[_0x5dd4a5(0x1b8)](_0x5dd4a5(0x145),()=>{const _0x3a5027=_0x5dd4a5;mobileMenu[_0x3a5027(0x150)][_0x3a5027(0x17d)]('hidden');});function closeMobileMenuAndNavigate(_0x4021a0){const _0x497bd9=_0x5dd4a5;mobileMenu[_0x497bd9(0x150)][_0x497bd9(0x1ab)](_0x497bd9(0x1af)),navigate(_0x4021a0);}mobileNavBriefing[_0x5dd4a5(0x1b8)]('click',_0x40dd8b=>{_0x40dd8b['preventDefault'](),closeMobileMenuAndNavigate('briefing');}),mobileNavQa[_0x5dd4a5(0x1b8)]('click',_0x2cb9ee=>{const _0x281a61=_0x5dd4a5;_0x2cb9ee[_0x281a61(0x157)](),closeMobileMenuAndNavigate('qa');});const briefingLoading=document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x156)),briefingContent=document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x149)),briefingDate=document[_0x5dd4a5(0x1a6)]('briefingDate'),mainSummary=document['getElementById'](_0x5dd4a5(0x1b2)),highlightsContainer=document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x1aa)),playBtn=document[_0x5dd4a5(0x1a6)]('playBtn'),playBtnText=document[_0x5dd4a5(0x1a6)]('playBtnText'),playIcon=document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x15b)),stopIcon=document['getElementById'](_0x5dd4a5(0x1bd)),aiStatus=document[_0x5dd4a5(0x1a6)](_0x5dd4a5(0x186));let currentBriefing=null;const icons={'trending-up':_0x5dd4a5(0x172),'flame':_0x5dd4a5(0x17e),'bank':_0x5dd4a5(0x18d),'circle-dollar-sign':'<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20class=\x22lucide\x20lucide-circle-dollar-sign\x22><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22/><path\x20d=\x22M16\x208h-6a2\x202\x200\x201\x200\x200\x204h4a2\x202\x200\x201\x201\x200\x204H8\x22/><path\x20d=\x22M12\x2018V6\x22/></svg>','globe':_0x5dd4a5(0x14f)};async function fetchRealAIBriefing(){const _0x25dd4=_0x5dd4a5;if(!GEMINI_API_KEY)return console[_0x25dd4(0x19b)](_0x25dd4(0x146)),{'mainSummary':'ไม่สามารถโหลดข้อมูลได้','highlights':[],'speechText':_0x25dd4(0x197)};const _0x5e6505='https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key='+GEMINI_API_KEY,_0x599b4a=_0x25dd4(0x1b9)+new Date()[_0x25dd4(0x14a)](_0x25dd4(0x1c1))+').\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20หัวข้อที่ต้องการคือ:\x20ภาพรวมการเงิน,\x20การลงทุน,\x20ราคาทองคำล่าสุด,\x20ราคาหุ้นต่างประเทศ\x20(เช่น\x20S&P\x20500),\x20หุ้นไทย\x20(SET\x20Index),\x20ราคาน้ำมัน,\x20และสถานการณ์โลกที่สำคัญ.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20กรุณาตอบกลับเป็น\x20JSON\x20object\x20ที่มีโครงสร้างตามนี้เท่านั้น\x20ห้ามมีข้อความอื่นนอก\x20JSON\x20object\x20และไม่ต้องใส่\x20markdown\x20backticks:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22mainSummary\x22:\x20\x22บทสรุปหลักที่กระชับ\x201-2\x20ประโยค\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22highlights\x22:\x20[\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x22title\x22:\x20\x22หัวข้อไฮไลท์\x22,\x20\x22detail\x22:\x20\x22รายละเอียดสั้นๆ\x22},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x22title\x22:\x20\x22หัวข้อไฮไลท์\x22,\x20\x22detail\x22:\x20\x22รายละเอียดสั้นๆ\x22},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20{\x22title\x22:\x20\x22หัวข้อไฮไลท์\x22,\x20\x22detail\x22:\x20\x22รายละเอียดสั้นๆ\x22}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20],\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22speechText\x22:\x20\x22ข้อความทั้งหมดสำหรับอ่านออกเสียง\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x52ae64={'contents':[{'parts':[{'text':_0x599b4a}]}],'tools':[{'google_search':{}}]};try{const _0x5ebc93=await fetch(_0x5e6505,{'method':_0x25dd4(0x162),'headers':{'Content-Type':_0x25dd4(0x18c)},'body':JSON[_0x25dd4(0x19c)](_0x52ae64)});if(!_0x5ebc93['ok'])throw new Error(_0x25dd4(0x16b)+_0x5ebc93['status']);const _0x291e99=await _0x5ebc93[_0x25dd4(0x175)](),_0x2b62de=_0x291e99[_0x25dd4(0x16a)]?.[0x0];if(_0x2b62de&&_0x2b62de[_0x25dd4(0x13e)]?.[_0x25dd4(0x19f)]?.[0x0]?.[_0x25dd4(0x152)]){const _0x54ca89=_0x2b62de[_0x25dd4(0x13e)][_0x25dd4(0x19f)][0x0][_0x25dd4(0x152)],_0x58dd12=_0x54ca89['indexOf']('{'),_0x514d0d=_0x54ca89[_0x25dd4(0x199)]('}')+0x1;if(_0x58dd12!==-0x1&&_0x514d0d>_0x58dd12){const _0x33ffc6=_0x54ca89['substring'](_0x58dd12,_0x514d0d);try{return JSON[_0x25dd4(0x1b6)](_0x33ffc6);}catch(_0xbb55a2){console['error']('Failed\x20to\x20parse\x20JSON\x20from\x20AI\x20response:',_0xbb55a2,_0x33ffc6);throw new Error('AI\x20returned\x20invalid\x20JSON\x20format.');}}else throw new Error(_0x25dd4(0x18b));}else throw new Error(_0x25dd4(0x173));}catch(_0x5c56f8){return console[_0x25dd4(0x19b)](_0x25dd4(0x143),_0x5c56f8),{'mainSummary':_0x25dd4(0x164),'highlights':[],'speechText':'เกิดข้อผิดพลาดในการดึงข้อมูลสรุป\x20กรุณาลองใหม่อีกครั้งครับ'};}}function assignIconToHighlight(_0x1d4a81){const _0x1ea047=_0x5dd4a5,_0x186bd0=_0x1d4a81['toLowerCase']();if(_0x186bd0[_0x1ea047(0x195)](_0x1ea047(0x183)))return _0x1ea047(0x169);if(_0x186bd0[_0x1ea047(0x195)](_0x1ea047(0x158)))return _0x1ea047(0x17c);if(_0x186bd0[_0x1ea047(0x195)](_0x1ea047(0x1b7))||_0x186bd0['includes']('ตลาด')||_0x186bd0[_0x1ea047(0x195)](_0x1ea047(0x1b5)))return'trending-up';if(_0x186bd0[_0x1ea047(0x195)]('โลก')||_0x186bd0[_0x1ea047(0x195)]('รัฐเซีย')||_0x186bd0[_0x1ea047(0x195)](_0x1ea047(0x167))||_0x186bd0[_0x1ea047(0x195)](_0x1ea047(0x188)))return _0x1ea047(0x166);return'bank';}function displayBriefing(_0x482518){const _0x323a95=_0x5dd4a5;mainSummary[_0x323a95(0x184)]=_0x482518['mainSummary'],highlightsContainer[_0x323a95(0x16d)]='';_0x482518['highlights']&&Array[_0x323a95(0x198)](_0x482518[_0x323a95(0x1b0)])&&_0x482518[_0x323a95(0x1b0)]['forEach'](_0x399cb9=>{const _0x192276=_0x323a95,_0x44170f=assignIconToHighlight(_0x399cb9[_0x192276(0x181)]),_0x1e28f6=document[_0x192276(0x19a)](_0x192276(0x1ba));_0x1e28f6[_0x192276(0x165)]='bg-white\x20rounded-2xl\x20p-6\x20shadow-lg\x20shadow-slate-200/60\x20flex\x20items-start\x20space-x-5\x20transition-transform\x20transform\x20hover:-translate-y-1.5',_0x1e28f6[_0x192276(0x16d)]='<div\x20class=\x22bg-teal-50\x20text-teal-600\x20rounded-lg\x20p-3\x22>'+(icons[_0x44170f]||icons['bank'])+_0x192276(0x192)+_0x399cb9[_0x192276(0x181)]+_0x192276(0x1be)+_0x399cb9[_0x192276(0x161)]+_0x192276(0x1a1),highlightsContainer[_0x192276(0x189)](_0x1e28f6);});const _0x4164e2=new Date();briefingDate[_0x323a95(0x184)]=_0x323a95(0x141)+_0x4164e2[_0x323a95(0x14a)](_0x323a95(0x1c1),{'year':'numeric','month':_0x323a95(0x1bf),'day':_0x323a95(0x14c)}),playBtn[_0x323a95(0x16e)]=![],playBtnText['textContent']=_0x323a95(0x140);}playBtn['addEventListener']('click',()=>{const _0x502517=_0x5dd4a5;if(isSpeaking)stopSpeaking();else currentBriefing&&speak(currentBriefing[_0x502517(0x13f)],updateUIForBriefing);});const qaForm=document['getElementById'](_0x5dd4a5(0x15c)),qaInput=document['getElementById'](_0x5dd4a5(0x1ac)),qaSubmitBtn=document['getElementById'](_0x5dd4a5(0x194)),chatContainer=document['getElementById'](_0x5dd4a5(0x155));async function getAIAnswer(_0x18d194){const _0x21def9=_0x5dd4a5;if(!GEMINI_API_KEY)return console[_0x21def9(0x19b)](_0x21def9(0x146)),{'answer':_0x21def9(0x197)};const _0x3856e9='https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key='+GEMINI_API_KEY,_0xcc043b='คุณคือ\x20FinAI\x20ผู้ช่วย\x20AI\x20อัจฉริยะที่เชี่ยวชาญด้านการเงินการลงทุน\x20แต่ก็สามารถตอบคำถามทั่วไปได้ทุกเรื่อง\x20กรุณาตอบคำถามของผู้ใช้งานเป็นภาษาไทยให้กระชับ\x20ชัดเจน\x20และเข้าใจง่ายที่สุด',_0x429531={'contents':[{'parts':[{'text':_0x18d194}]}],'tools':[{'google_search':{}}],'systemInstruction':{'parts':[{'text':_0xcc043b}]}};try{const _0x167be7=await fetch(_0x3856e9,{'method':'POST','headers':{'Content-Type':_0x21def9(0x18c)},'body':JSON[_0x21def9(0x19c)](_0x429531)});if(!_0x167be7['ok'])throw new Error('API\x20call\x20failed\x20with\x20status:\x20'+_0x167be7[_0x21def9(0x18f)]);const _0x4180a7=await _0x167be7[_0x21def9(0x175)](),_0x1662b2=_0x4180a7[_0x21def9(0x16a)]?.[0x0];if(_0x1662b2&&_0x1662b2[_0x21def9(0x13e)]?.[_0x21def9(0x19f)]?.[0x0]?.['text'])return{'answer':_0x1662b2['content']['parts'][0x0][_0x21def9(0x152)]};else throw new Error('Invalid\x20response\x20structure\x20from\x20API.');}catch(_0x459d1a){return console[_0x21def9(0x19b)](_0x21def9(0x15f),_0x459d1a),{'answer':_0x21def9(0x147)};}}function addMessageToChat(_0x33803a,_0x447889,_0x575729=![]){const _0x2e8d14=_0x5dd4a5,_0x1584e3=document[_0x2e8d14(0x19a)](_0x2e8d14(0x1ba));_0x1584e3[_0x2e8d14(0x165)]=_0x2e8d14(0x160)+(_0x33803a==='user'?_0x2e8d14(0x193):_0x2e8d14(0x1ae));const _0x4107b3=document[_0x2e8d14(0x19a)]('div');_0x4107b3[_0x2e8d14(0x165)]=_0x2e8d14(0x182)+(_0x33803a===_0x2e8d14(0x159)?_0x2e8d14(0x1ad):_0x2e8d14(0x16c));_0x33803a==='thinking'?_0x4107b3[_0x2e8d14(0x16d)]='<div\x20class=\x22thinking-bubble\x20flex\x20space-x-1.5\x22>'+_0x447889+_0x2e8d14(0x1a9):_0x4107b3[_0x2e8d14(0x16d)]=_0x447889['replace'](/\n/g,'<br>');if(_0x575729){const _0x501266=document[_0x2e8d14(0x19a)](_0x2e8d14(0x13d));_0x501266[_0x2e8d14(0x165)]=_0x2e8d14(0x176),_0x501266[_0x2e8d14(0x16d)]=_0x2e8d14(0x19e),_0x501266[_0x2e8d14(0x196)]=()=>speak(_0x447889),_0x4107b3[_0x2e8d14(0x189)](_0x501266);}return _0x1584e3[_0x2e8d14(0x189)](_0x4107b3),chatContainer[_0x2e8d14(0x189)](_0x1584e3),chatContainer['scrollTop']=chatContainer[_0x2e8d14(0x14d)],_0x1584e3;}qaForm[_0x5dd4a5(0x1b8)](_0x5dd4a5(0x15a),async _0xe1e8bc=>{const _0x191f75=_0x5dd4a5;_0xe1e8bc[_0x191f75(0x157)]();const _0x607b74=qaInput[_0x191f75(0x1a7)][_0x191f75(0x180)]();if(!_0x607b74)return;qaInput[_0x191f75(0x16e)]=!![],qaSubmitBtn[_0x191f75(0x16e)]=!![],addMessageToChat(_0x191f75(0x159),_0x607b74),qaInput[_0x191f75(0x1a7)]='';const _0x531f37=addMessageToChat(_0x191f75(0x163),_0x191f75(0x1bb)),_0x4bb771=await getAIAnswer(_0x607b74);_0x531f37['remove'](),addMessageToChat('ai',_0x4bb771[_0x191f75(0x15d)],!![]),qaInput[_0x191f75(0x16e)]=![],qaSubmitBtn[_0x191f75(0x16e)]=![];});function speak(_0x826cb9,_0x1ae9b0=null){const _0x379659=_0x5dd4a5;speech[_0x379659(0x185)]&&speech['cancel']();const _0x28dab9=_0x826cb9[_0x379659(0x18a)](/[\*#]/g,'');utterance=new SpeechSynthesisUtterance(_0x28dab9),utterance[_0x379659(0x15e)]=_0x379659(0x1c1),utterance['rate']=0x1,utterance[_0x379659(0x14e)]=()=>{const _0x4da0e7=_0x379659;isSpeaking=!![];if(_0x1ae9b0)_0x1ae9b0[_0x4da0e7(0x185)]();},utterance[_0x379659(0x1b1)]=()=>{const _0x5da28a=_0x379659;isSpeaking=![];if(_0x1ae9b0)_0x1ae9b0[_0x5da28a(0x1a4)]();},speech[_0x379659(0x151)](utterance);}function _0x5471(){const _0x54faf6=['lastIndexOf','createElement','error','stringify','55SDMTuR','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2220\x22\x20height=\x2220\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><polygon\x20points=\x2211\x205\x206\x209\x202\x209\x202\x2015\x206\x2015\x2011\x2019\x2011\x205\x22></polygon></svg>','parts','speechSynthesis','</p></div>','page-qa','32769AKKCEs','stopped','mobile-nav-briefing','getElementById','value','nav-link-active','</div>','highlightsContainer','add','qa-input','chat-bubble-user','justify-start','hidden','highlights','onend','mainSummary','page-briefing','241026XKhvaS','set','parse','หุ้น','addEventListener','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ในฐานะผู้เชี่ยวชาญด้านการเงินและการลงทุน,\x20กรุณาสรุปข้อมูลสรุปประจำวันสำหรับวันนี้\x20(','div','<span></span><span></span><span></span>','38576SBURLj','stopIcon','</h3><p\x20class=\x22text-slate-500\x20mt-1\x22>','long','mobile-menu','th-TH','button','content','speechText','ฟังบทวิเคราะห์','ข้อมูลสรุปตลาดประจำวันที่\x20','283496OpQELb','Error\x20fetching\x20real\x20AI\x20briefing:','opacity-0','click','Gemini\x20API\x20Key\x20is\x20missing.','เกิดข้อผิดพลาดในการเชื่อมต่อกับ\x20AI\x20กรุณาลองใหม่อีกครั้งครับ','70RJGcLi','briefing-contentArea','toLocaleDateString','DOMContentLoaded','numeric','scrollHeight','onstart','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20class=\x22lucide\x20lucide-globe\x22><circle\x20cx=\x2212\x22\x20cy=\x2212\x22\x20r=\x2210\x22/><path\x20d=\x22M12\x202a14.5\x2014.5\x200\x200\x200\x200\x2020\x2014.5\x2014.5\x200\x200\x200\x200-20\x22/><path\x20d=\x22M2\x2012h20\x22/></svg>','classList','speak','text','2023224FywsiL','<p\x20class=\x22text-lg\x20text-red-500\x22>กรุณาตั้งค่า\x20GEMINI_API_KEY\x20ในโค้ดก่อนใช้งาน</p>','chat-container','briefing-loadingState','preventDefault','น้ำมัน','user','submit','playIcon','qa-form','answer','lang','Error\x20fetching\x20AI\x20answer:','flex\x20','detail','POST','thinking','เกิดข้อผิดพลาดในการดึงข้อมูลสรุป','className','globe','จีน','880997yrGkpg','circle-dollar-sign','candidates','API\x20call\x20failed:\x20','chat-bubble-ai','innerHTML','disabled','770dFdLHt','forEach','AIzaSyBFUWczi94LOnK3df4sSzHfBTlzTTeNInA','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20class=\x22lucide\x20lucide-trending-up\x22><polyline\x20points=\x2222\x207\x2013.5\x2015.5\x208.5\x2010.5\x202\x2017\x22/><polyline\x20points=\x2216\x207\x2022\x207\x2022\x2013\x22/></svg>','Invalid\x20response\x20structure\x20from\x20API.','3pWJhyE','json','ml-3\x20text-teal-600\x20hover:text-teal-800\x20align-middle\x20inline-block','remove','252irlive','279dhdaqq','หยุดฟัง','11430rmvwpv','flame','toggle','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20class=\x22lucide\x20lucide-flame\x22><path\x20d=\x22M8.5\x2014.5A2.5\x202.5\x200\x200\x200\x2011\x2012c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054\x202-6\x20.5\x202.5\x202\x204.9\x204\x206.5\x202\x201.6\x203\x203.5\x203\x205.5a7\x207\x200\x201\x201-14\x200c0-1.153.433-2.294\x201-3a2.5\x202.5\x200\x200\x200\x202.5\x202.5z\x22/></svg>','cancel','trim','title','p-4\x20rounded-lg\x20max-w-lg\x20','ทอง','textContent','speaking','aiStatus','values','สหรัฐ','appendChild','replace','No\x20JSON\x20object\x20found\x20in\x20AI\x20response.','application/json','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2224\x22\x20height=\x2224\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20class=\x22lucide\x20lucide-landmark\x22><line\x20x1=\x2212\x22\x20x2=\x2212\x22\x20y1=\x2222\x22\x20y2=\x2218\x22/><path\x20d=\x22M16\x2018h-8\x22/><path\x20d=\x22M3\x2022h18\x22/><path\x20d=\x22M4\x2018V8a2\x202\x200\x200\x201\x202-2h12a2\x202\x200\x200\x201\x202\x202v10\x22/><path\x20d=\x22M4\x2012h16\x22/><path\x20d=\x22m20\x208-8-5-8\x205\x22/><path\x20d=\x22M8\x2012v4\x22/><path\x20d=\x22M16\x2012v4\x22/></svg>','briefing','status','nav-briefing','847mpOOjt','</div><div><h3\x20class=\x22font-bold\x20text-slate-800\x22>','justify-end','qa-submit-btn','includes','onclick','ขออภัยค่ะ\x20ไม่สามารถเชื่อมต่อกับ\x20AI\x20ได้เนื่องจากไม่ได้ตั้งค่า\x20API\x20Key','isArray'];_0x5471=function(){return _0x54faf6;};return _0x5471();}function stopSpeaking(){const _0x3847d4=_0x5dd4a5;speech[_0x3847d4(0x17f)](),isSpeaking=![],updateUIForBriefing[_0x3847d4(0x1a4)]();}const updateUIForBriefing={'speaking':()=>{const _0x12b366=_0x5dd4a5;aiStatus[_0x12b366(0x150)]['remove'](_0x12b366(0x144)),playBtnText[_0x12b366(0x184)]=_0x12b366(0x17a),playIcon[_0x12b366(0x150)][_0x12b366(0x1ab)](_0x12b366(0x1af)),stopIcon[_0x12b366(0x150)]['remove']('hidden');},'stopped':()=>{const _0x5a0148=_0x5dd4a5;aiStatus[_0x5a0148(0x150)]['add']('opacity-0'),playBtnText[_0x5a0148(0x184)]='ฟังซ้ำอีกครั้ง',playIcon[_0x5a0148(0x150)][_0x5a0148(0x177)]('hidden'),stopIcon[_0x5a0148(0x150)][_0x5a0148(0x1ab)](_0x5a0148(0x1af));}};window[_0x5dd4a5(0x1b8)](_0x5dd4a5(0x14b),async()=>{const _0x5e52f7=_0x5dd4a5;if(!GEMINI_API_KEY){briefingLoading[_0x5e52f7(0x16d)]=_0x5e52f7(0x154);return;}currentBriefing=await fetchRealAIBriefing(),briefingLoading[_0x5e52f7(0x150)][_0x5e52f7(0x1ab)](_0x5e52f7(0x1af)),briefingContent[_0x5e52f7(0x150)]['remove'](_0x5e52f7(0x1af)),displayBriefing(currentBriefing),currentBriefing&&currentBriefing[_0x5e52f7(0x13f)]&&speak(currentBriefing[_0x5e52f7(0x13f)],updateUIForBriefing);}),window[_0x5dd4a5(0x1b8)]('beforeunload',stopSpeaking);
    </script>
</body>
</html>


